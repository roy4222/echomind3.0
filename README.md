# EchoMind2

EchoMind2 æ˜¯ä¸€å€‹å°ˆç‚ºè¼”ä»å¤§å­¸è³‡è¨Šç®¡ç†å­¸ç³»ï¼ˆè¼”å¤§è³‡ç®¡ï¼‰åŒå­¸è¨­è¨ˆçš„ AI æ™ºèƒ½å­¸ç¿’åŠ©æ‰‹ï¼Œçµåˆå‘é‡æª¢ç´¢æŠ€è¡“ï¼Œå¹«åŠ©åŒå­¸å€‘å¿«é€ŸæŸ¥è©¢èª²æ¥­ç›¸é—œå•é¡Œèˆ‡è§£ç­”ã€‚æœ¬ç³»çµ±æ—¨åœ¨è§£æ±ºå­¸ç¿’éç¨‹ä¸­çš„ç–‘é›£å›°æƒ‘ï¼Œè®“è³‡ç®¡å°ˆæ¥­çŸ¥è­˜çš„ç²å–æ›´åŠ é«˜æ•ˆèˆ‡æ™ºèƒ½åŒ–ã€‚

### æ ¸å¿ƒç›®æ¨™

- **è¼”å¤§è³‡ç®¡å°ˆæ¥­å•ç­”**ï¼šå¿«é€Ÿè§£ç­”ç¨‹å¼è¨­è¨ˆã€è³‡æ–™åº«ç®¡ç†ã€ç³»çµ±åˆ†æèˆ‡è¨­è¨ˆç­‰è³‡ç®¡å°ˆæ¥­å•é¡Œ
- **å­¸ç¿’è³‡æºæ•´åˆ**ï¼šåŒ¯é›†èª²ç¨‹å…§å®¹ã€å¯¦ç”¨è³‡æºå’Œå­¸ç¿’æŒ‡å—ï¼Œæä¾›ä¸€ç«™å¼å­¸ç¿’å¹³å°
- **èª²æ¥­ç–‘é›£æ’è§£**ï¼šé‡å°å¸¸è¦‹èª²æ¥­å›°æƒ‘æä¾›è©³ç´°è§£æå’Œç¯„ä¾‹èªªæ˜
- **çŸ¥è­˜é«”ç³»å»ºæ§‹**ï¼šå¹«åŠ©åŒå­¸ç³»çµ±æ€§ç†è§£è³‡ç®¡å°ˆæ¥­çŸ¥è­˜æ¶æ§‹
- **ç´“è§£å­¸ç¿’å£“åŠ›**ï¼šæä¾›è¼•é¬†ä¼‘é–’çš„å°éŠæˆ²ï¼Œå¹«åŠ©åŒå­¸åœ¨å­¸ç¿’ä¹‹é¤˜æ”¾é¬†å¿ƒæƒ…
- **ä¿ƒé€²äº¤æµäº’å‹•**ï¼šé€éåŒ¿åç•™è¨€æ¿åŠŸèƒ½ï¼Œå»ºç«‹å‹å–„çš„å­¸ç¿’ç¤¾ç¾¤ç’°å¢ƒ

### ä¸»è¦åŠŸèƒ½

- **æ™ºèƒ½å•ç­”ç³»çµ±**ï¼šåŸºæ–¼ Cohere åµŒå…¥æŠ€è¡“å’Œ Pinecone å‘é‡è³‡æ–™åº«çš„èªæ„åŒ–æª¢ç´¢
- **å€‹äººå­¸ç¿’åŠ©æ‰‹**ï¼šæ”¯æ´èª²ç¨‹ç­†è¨˜ã€ä½œæ¥­æŒ‡å°å’ŒçŸ¥è­˜æ•´ç†
- **å­¸ç§‘çŸ¥è­˜åœ–è­œ**ï¼šè¦–è¦ºåŒ–å‘ˆç¾è³‡ç®¡å°ˆæ¥­çŸ¥è­˜ä¹‹é–“çš„é—œè¯
- **å…¨æ–‡æª¢ç´¢**ï¼šå¿«é€Ÿæ‰¾åˆ°èˆ‡èª²æ¥­ç›¸é—œçš„é‡è¦è³‡è¨Š
- **AI è¼”åŠ©å­¸ç¿’**ï¼šè‡ªå‹•æ¨è–¦ç›¸é—œå­¸ç¿’è³‡æºå’Œå»¶ä¼¸é–±è®€
- **ç´“å£“å°éŠæˆ²**ï¼šå…§å»ºå¤šæ¬¾è¼•é¬†æœ‰è¶£çš„å°éŠæˆ²ï¼Œå¹«åŠ©åŒå­¸èˆ’ç·©å­¸ç¿’å£“åŠ›
- **åŒ¿åç•™è¨€æ¿**ï¼šè®“åŒå­¸å¯ä»¥è‡ªç”±äº¤æµå­¸ç¿’å¿ƒå¾—ã€èª²ç¨‹é«”é©—å’Œç”Ÿæ´»æ„Ÿæƒ³

### æŠ€è¡“äº®é»

EchoMind2 ä½¿ç”¨å…ˆé€²çš„äººå·¥æ™ºæ…§å’Œèªè¨€è™•ç†æŠ€è¡“ï¼Œçµåˆå‘é‡æœå°‹åŠŸèƒ½ï¼Œå¯¦ç¾ç²¾ç¢ºçš„çŸ¥è­˜æª¢ç´¢å’Œæ™ºèƒ½æ¨è–¦ã€‚ç³»çµ±æ ¹æ“šè¼”å¤§è³‡ç®¡èª²ç¨‹å…§å®¹é€²è¡Œå„ªåŒ–ï¼Œèƒ½å¤ ç†è§£åŒå­¸çš„æŸ¥è©¢æ„åœ–ï¼Œä¸¦å¾çŸ¥è­˜åº«ä¸­æ‰¾å‡ºæœ€ç›¸é—œçš„è§£ç­”ï¼Œå³ä½¿æŸ¥è©¢èˆ‡è³‡æ–™åº«ä¸­çš„å…§å®¹è¡¨è¿°ä¸å®Œå…¨ä¸€è‡´ã€‚

## å°ˆæ¡ˆæ¶æ§‹

è©²å°ˆæ¡ˆä½¿ç”¨å‰å¾Œç«¯åˆ†é›¢çš„æ¶æ§‹ï¼š

- **å‰ç«¯**ï¼š
  - ä½¿ç”¨ Next.js + TypeScript + TailwindCSS æ§‹å»ºçš„ç¾ä»£åŒ–ç¶²é æ‡‰ç”¨
  - éŸ¿æ‡‰å¼è¨­è¨ˆï¼Œæ”¯æ´æ¡Œé¢å’Œç§»å‹•è¨­å‚™
  - ç›´è¦ºçš„ç”¨æˆ¶ç•Œé¢ï¼Œå„ªåŒ–çŸ¥è­˜ç®¡ç†é«”é©—

- **å¾Œç«¯**ï¼š
  - ä½¿ç”¨ Cloudflare Workers éƒ¨ç½²çš„é«˜æ€§èƒ½ API æœå‹™
  - ç„¡ä¼ºæœå™¨æ¶æ§‹ï¼Œä¿è­‰ç³»çµ±ç©©å®šæ€§å’Œå¯æ“´å±•æ€§
  - ä½¿ç”¨ Cohere é€²è¡Œæ–‡æœ¬åµŒå…¥è™•ç†
  - æ¡ç”¨ Pinecone ä½œç‚ºå‘é‡è³‡æ–™åº«ï¼Œæ”¯æ´é«˜æ•ˆçš„èªæ„æœå°‹

- **å‘é‡æœå°‹**ï¼š
  - ä½¿ç”¨ Cohere çš„å¤šèªè¨€åµŒå…¥æ¨¡å‹æ”¯æ´ä¸­è‹±æ–‡å…§å®¹
  - Pinecone å‘é‡è³‡æ–™åº«æä¾›æ¯«ç§’ç´šæŸ¥è©¢é€Ÿåº¦
  - è‡ªå®šç¾©è™•ç†æµç¨‹ï¼Œå„ªåŒ–å•ç­”çµæœç›¸é—œæ€§

## æœ¬åœ°é–‹ç™¼è¨­ç½®

### å‰ææ¢ä»¶

- Node.js 18+
- npm æˆ– yarn
- Cloudflare å¸³æˆ¶ï¼ˆç”¨æ–¼å¾Œç«¯éƒ¨ç½²ï¼‰
- Cohere API é‡‘é‘°ï¼ˆç”¨æ–¼æ–‡æœ¬åµŒå…¥è™•ç†ï¼‰
- Pinecone å¸³æˆ¶èˆ‡ API é‡‘é‘°ï¼ˆç”¨æ–¼å‘é‡è³‡æ–™åº«æœå‹™ï¼‰
- Python 3.8+ï¼ˆç”¨æ–¼å‘é‡æœå°‹åŠŸèƒ½ï¼‰

### å®‰è£

1. å…‹éš†å„²å­˜åº«
```bash
git clone https://github.com/yourusername/echomind2.git
cd echomind2
```

2. å®‰è£ä¾è³´
```bash
npm run setup
```

3. é…ç½®ç’°å¢ƒè®Šæ•¸
```bash
# å‰ç«¯ç’°å¢ƒè®Šæ•¸
cp frontend/.env.example frontend/.env.local
# å¾Œç«¯ç’°å¢ƒè®Šæ•¸
cp backend/.env.example backend/.env
# å‘é‡æœå°‹ç’°å¢ƒè®Šæ•¸
cp backend/llama_index/.env.example backend/llama_index/.env
```

ç·¨è¼¯ç’°å¢ƒè®Šæ•¸æ–‡ä»¶ï¼Œå¡«å…¥å¿…è¦çš„ API é‡‘é‘°å’Œé…ç½®ï¼š

- `.env.local`ï¼šé…ç½®å‰ç«¯ API è·¯å¾‘å’Œå…¬é–‹è®Šæ•¸
- `.env`ï¼šè¨­å®š Cloudflare å’Œå¾Œç«¯ç›¸é—œå¯†é‘°
- `llama_index/.env`ï¼šè¨­å®š Cohere API é‡‘é‘°å’Œ Pinecone ç›¸é—œé…ç½®

4. å®‰è£å‘é‡æœå°‹ä¾è³´
```bash
cd backend/llama_index
pip install -r requirements.txt
cd ../..
```

### å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨

åŒæ™‚å•Ÿå‹•å‰ç«¯å’Œå¾Œç«¯ï¼š
```bash
npm run dev
```

æˆ–å–®ç¨å•Ÿå‹•ï¼š
```bash
# åƒ…å‰ç«¯
npm run frontend:dev

# åƒ…å¾Œç«¯
npm run backend:dev
```

## å‘é‡æœå°‹åŠŸèƒ½è¨­ç½®

EchoMind2 ä½¿ç”¨ Cohere å’Œ Pinecone å¯¦ç¾å¼·å¤§çš„å‘é‡æœç´¢åŠŸèƒ½ï¼Œç‰¹åˆ¥é‡å°è¼”å¤§è³‡ç®¡çš„èª²ç¨‹å…§å®¹é€²è¡Œäº†å„ªåŒ–ï¼š

1. è™•ç†è³‡ç®¡èª²ç¨‹å•ç­”è³‡æ–™é›†
```bash
cd backend/llama_index
python process_qa_data.py --file qa_data_sample.json
```

2. æ¸¬è©¦å‘é‡æœå°‹èª²æ¥­å•é¡Œ
```bash
python query_qa.py "è¼”å¤§è³‡ç®¡å¸¸ç”¨çš„ç¨‹å¼èªè¨€æœ‰å“ªäº›ï¼Ÿ"
```

3. é€²éšæœå°‹é¸é …
```bash
# æŒ‡å®šè¿”å›çµæœæ•¸é‡
python query_qa.py "Python åœ¨è³‡ç®¡ç³»æœ‰ä»€éº¼æ‡‰ç”¨" --top-k 3

# æŒ‰å­¸ç§‘é¡åˆ¥éæ¿¾
python query_qa.py "è³‡æ–™åº«ç®¡ç†åŸºç¤" --category "è³‡æ–™åº«ç®¡ç†"

# æŒ‰é‡è¦ç¨‹åº¦éæ¿¾ï¼ˆ5åˆ†ç‚ºæ ¸å¿ƒèª²ç¨‹å…§å®¹ï¼‰
python query_qa.py "ç¨‹å¼è¨­è¨ˆå…¥é–€" --min-importance 4
```

## ä¸»è¦åŠŸèƒ½ä½¿ç”¨

1. **èª²æ¥­å•é¡ŒæŸ¥è©¢**ï¼šè¼¸å…¥è³‡ç®¡ç›¸é—œå°ˆæ¥­å•é¡Œï¼Œç²å¾—ç²¾ç¢ºç­”æ¡ˆ
2. **å­¸ç¿’è³‡æºæ¢ç´¢**ï¼šç™¼ç¾èˆ‡èª²ç¨‹ä¸»é¡Œç›¸é—œçš„å­¸ç¿’è³‡æ–™å’Œåƒè€ƒè³‡æº
3. **çŸ¥è­˜é—œè¯ç€è¦½**ï¼šäº†è§£ä¸åŒè³‡ç®¡å­¸ç§‘çŸ¥è­˜é»ä¹‹é–“çš„é€£æ¥å’Œé—œä¿‚
4. **å°ˆæ¥­è©å½™è§£é‡‹**ï¼šå¿«é€ŸæŸ¥è©¢è³‡ç®¡å°ˆæ¥­è¡“èªå’Œæ¦‚å¿µçš„è§£é‡‹
5. **ç´“å£“å°éŠæˆ²**ï¼šç©ç°¡å–®æœ‰è¶£çš„éŠæˆ²ï¼Œåœ¨å­¸ç¿’ç–²å‹æ™‚è½‰æ›å¿ƒæƒ…
6. **åŒ¿åäº¤æµ**ï¼šåœ¨ç•™è¨€æ¿åˆ†äº«æƒ³æ³•ï¼Œä¸å¿…æ“”å¿ƒèº«ä»½æš´éœ²çš„å£“åŠ›

## ç´“å£“å°éŠæˆ²å¹³å°

EchoMind2 å…§å»ºå¤šæ¬¾é©åˆçŸ­æ™‚é–“ä¼‘æ¯çš„å°éŠæˆ²ï¼Œå¹«åŠ©åŒå­¸åœ¨ç·Šå¼µçš„å­¸ç¿’éç¨‹ä¸­æ”¾é¬†å¿ƒæƒ…ï¼š

- **è¨˜æ†¶åŠ›éŠæˆ²**ï¼šè¨“ç·´è¨˜æ†¶åŠ›çš„å¡ç‰‡é…å°éŠæˆ²
- **æ•¸ç¨ç›Šæ™º**ï¼šé›ç…‰é‚è¼¯æ€ç¶­çš„æ•¸å­—è¬é¡Œ
- **ç°¡æ˜“è²ªé£Ÿè›‡**ï¼šç¶“å…¸çš„ä¼‘é–’å°éŠæˆ²
- **ç¨‹å¼ç¢¼çŒœè¬**ï¼šçµåˆè³‡ç®¡å°ˆæ¥­çŸ¥è­˜çš„ç·¨ç¨‹å°æ¸¬é©—
- **æ•²æ“Šç¯€å¥**ï¼šéŸ³æ¨‚ç¯€å¥éŠæˆ²ï¼Œç´“è§£å£“åŠ›

éŠæˆ²å¹³å°çš„ç‰¹é»ï¼š
- ä¸éœ€é¡å¤–å®‰è£ï¼Œç›´æ¥åœ¨ç€è¦½å™¨ä¸­ç©
- éŠæˆ²æ™‚é–“çŸ­ï¼Œé©åˆèª²é–“ä¼‘æ¯
- å¯è¨˜éŒ„å€‹äººæœ€é«˜åˆ†ï¼Œè¿½è¹¤é€²æ­¥
- å®šæœŸæ›´æ–°æ–°éŠæˆ²å…§å®¹

## åŒ¿åç•™è¨€æ¿åŠŸèƒ½

åŒ¿åç•™è¨€æ¿ç‚ºè¼”å¤§è³‡ç®¡åŒå­¸æä¾›ä¸€å€‹è‡ªç”±è¡¨é”çš„ç©ºé–“ï¼š

- **å®Œå…¨åŒ¿å**ï¼šç„¡éœ€å¯¦åï¼Œä¿è­·åŒå­¸éš±ç§
- **åˆ†é¡è¨è«–**ï¼šæŒ‰èª²ç¨‹ã€å­¸ç¿’è³‡æºã€å¿ƒå¾—äº¤æµç­‰åˆ†é¡
- **å•é¡Œäº’åŠ©**ï¼šåŒå­¸é–“äº’ç›¸è§£ç­”èª²ç¨‹é›£é¡Œ
- **è³‡æºåˆ†äº«**ï¼šåˆ†äº«ç­†è¨˜ã€åƒè€ƒè³‡æ–™å’Œå­¸ç¿’æŠ€å·§
- **æƒ…ç·’æ”¯æŒ**ï¼šåˆ†äº«å­¸ç¿’å£“åŠ›å’Œå›°æƒ‘ï¼Œç²å¾—åŒç†æ”¯æŒ

ç•™è¨€æ¿ç®¡ç†ï¼š
- åŸºæœ¬å…§å®¹å¯©æ ¸ï¼Œç¢ºä¿è¨è«–ç’°å¢ƒå¥åº·å‹å–„
- é•è¦å…§å®¹è‡ªå‹•éæ¿¾æ©Ÿåˆ¶
- ç†±é–€è©±é¡Œç½®é ‚åŠŸèƒ½
- å¯é™„åŠ åœ–ç‰‡å’Œç¨‹å¼ç¢¼ç‰‡æ®µ

## æ‡‰ç”¨å ´æ™¯

- **èª²å‰é ç¿’**ï¼šæå‰äº†è§£å³å°‡å­¸ç¿’çš„èª²ç¨‹å…§å®¹å’Œé—œéµæ¦‚å¿µ
- **èª²å¾Œè¤‡ç¿’**ï¼šéå›ºèª²å ‚çŸ¥è­˜ï¼Œè§£ç­”å­¸ç¿’ä¸­çš„ç–‘æƒ‘
- **ä½œæ¥­å”åŠ©**ï¼šç²å–è§£é¡Œæ€è·¯å’Œç›¸é—œçŸ¥è­˜é»æŒ‡å°
- **è€ƒè©¦æº–å‚™**ï¼šç³»çµ±æ€§å›é¡§é‡è¦æ¦‚å¿µå’Œå…¸å‹å•é¡Œ
- **èª²é–“ä¼‘æ¯**ï¼šäº«å—ç´“å£“å°éŠæˆ²ï¼Œæ”¾é¬†ç·Šç¹ƒçš„å­¸ç¿’æƒ…ç·’
- **ç¤¾ç¾¤äº’å‹•**ï¼šåœ¨åŒ¿åç•™è¨€æ¿åˆ†äº«å­¸ç¿’ç¶“é©—ï¼Œç²å–åŒå„•æ”¯æŒå’Œå»ºè­°

## éƒ¨ç½²

### å‰ç«¯

æ§‹å»ºä¸¦éƒ¨ç½²å‰ç«¯ï¼š
```bash
npm run frontend:build
```

å°‡ç”Ÿæˆçš„éœæ…‹æ–‡ä»¶éƒ¨ç½²åˆ°æ‚¨é¸æ“‡çš„æ‰˜ç®¡æœå‹™ï¼ˆå¦‚ Vercelã€Netlify æˆ– GitHub Pagesï¼‰ã€‚

### å¾Œç«¯

éƒ¨ç½²åˆ° Cloudflare Workers æš«å­˜ç’°å¢ƒï¼š
```bash
npm run backend:deploy
```

éƒ¨ç½²åˆ° Cloudflare Workers ç”Ÿç”¢ç’°å¢ƒï¼š
```bash
npm run backend:deploy:production
```

### å‘é‡ç´¢å¼•éƒ¨ç½²

1. åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­è¨­ç½® Pinecone ç´¢å¼•
2. ä½¿ç”¨è™•ç†è…³æœ¬ä¸Šå‚³å‘é‡è³‡æ–™ï¼š
```bash
cd backend/llama_index
python process_qa_data.py --file your_production_data.json
```

## å°ˆæ¡ˆçµæ§‹

```
echomind2/
â”œâ”€â”€ frontend/          # Next.js å‰ç«¯æ‡‰ç”¨
â”‚   â”œâ”€â”€ app/           # é é¢è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ dashboard/ # ä½¿ç”¨è€…å„€è¡¨æ¿
â”‚   â”‚   â”œâ”€â”€ search/    # æœç´¢ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ games/     # ç´“å£“å°éŠæˆ²
â”‚   â”‚   â”œâ”€â”€ board/     # åŒ¿åç•™è¨€æ¿
â”‚   â”‚   â””â”€â”€ settings/  # è¨­å®šé é¢
â”‚   â”œâ”€â”€ components/    # UI å…ƒä»¶
â”‚   â”œâ”€â”€ lib/           # å…±ç”¨å‡½æ•¸å’Œå·¥å…·
â”‚   â””â”€â”€ contexts/      # React ä¸Šä¸‹æ–‡
â”œâ”€â”€ backend/           # Cloudflare Workers API
â”‚   â”œâ”€â”€ src/           # API æºç¢¼
â”‚   â”‚   â”œâ”€â”€ handlers/  # API ç«¯é»è™•ç†å™¨
â”‚   â”‚   â”œâ”€â”€ services/  # æœå‹™å±¤ï¼ˆå«åµŒå…¥å’Œå‘é‡æœå°‹ï¼‰
â”‚   â”‚   â””â”€â”€ types/     # TypeScript é¡å‹å®šç¾©
â”‚   â”œâ”€â”€ llama_index/   # å‘é‡ç´¢å¼•è™•ç†å·¥å…·
â”‚   â”‚   â”œâ”€â”€ process_qa_data.py  # è™•ç†å•ç­”è³‡æ–™
â”‚   â”‚   â”œâ”€â”€ query_qa.py         # æŸ¥è©¢å‘é‡è³‡æ–™åº«
â”‚   â”‚   â””â”€â”€ qa_data_sample.json # ç¯„ä¾‹å•ç­”è³‡æ–™
â”‚   â””â”€â”€ wrangler.toml  # Cloudflare é…ç½®
â””â”€â”€ package.json       # æ ¹å°ˆæ¡ˆè¨­å®š
```

## ç³»çµ±éœ€æ±‚

### æœ€ä½éœ€æ±‚

- **ç€è¦½å™¨**ï¼šæ”¯æ´ ES6 çš„ç¾ä»£ç€è¦½å™¨ï¼ˆChromeã€Firefoxã€Safariã€Edge ç­‰ï¼‰
- **ä¼ºæœå™¨**ï¼šç”¨æ–¼å¾Œç«¯çš„ Cloudflare Workersï¼ˆç„¡éœ€å°ˆç”¨ä¼ºæœå™¨ï¼‰
- **å­˜å„²**ï¼šPinecone å‘é‡è³‡æ–™åº«ï¼ˆå…è²»æ–¹æ¡ˆè¶³å¤ å°å‹ä½¿ç”¨ï¼‰
- **API**ï¼šCohere APIï¼ˆæœ‰å…è²»å±¤ç´šå¯ä¾›æ¸¬è©¦ä½¿ç”¨ï¼‰

### å»ºè­°é…ç½®

- ç©©å®šçš„äº’è¯ç¶²é€£æ¥
- æœ€æ–°ç‰ˆæœ¬çš„ Chrome æˆ– Firefox ç€è¦½å™¨
- å……è¶³çš„ Pinecone ç´¢å¼•ç©ºé–“ï¼ˆä»˜è²»æ–¹æ¡ˆï¼‰ç”¨æ–¼å¤§é‡çŸ¥è­˜ç®¡ç†

## è²¢ç»æŒ‡å—

æˆ‘å€‘æ­¡è¿è¼”å¤§è³‡ç®¡å­¸ç”Ÿã€æ•™å¸«å’Œç¤¾å€æˆå“¡çš„è²¢ç»ï¼å¦‚æœæ‚¨æƒ³åƒèˆ‡é–‹ç™¼ï¼Œè«‹éµå¾ªä»¥ä¸‹æ­¥é©Ÿï¼š

1. Fork æ­¤å„²å­˜åº«
2. å‰µå»ºæ‚¨çš„åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ‚¨çš„æ›´æ”¹ (`git commit -m 'æ·»åŠ ä¸€äº›è³‡ç®¡å­¸ç¿’è³‡æº'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. é–‹å•Ÿä¸€å€‹ Pull Request

### è²¢ç»é ˜åŸŸ

- **èª²ç¨‹è³‡æ–™**ï¼šè£œå……æˆ–æ›´æ–°å„ç§‘ç›®çš„å•ç­”å…§å®¹
- **å­¸ç¿’è³‡æº**ï¼šåˆ†äº«æœ‰åƒ¹å€¼çš„å­¸ç¿’é€£çµå’Œåƒè€ƒè³‡æ–™
- **å°ˆæ¥­å•ç­”**ï¼šæ“´å……å¸¸è¦‹å•é¡Œèˆ‡è§£ç­”è³‡æ–™åº«
- **ç•Œé¢å„ªåŒ–**ï¼šæ”¹é€²ç”¨æˆ¶é«”é©—å’Œè¦–è¦ºè¨­è¨ˆ
- **ç´“å£“éŠæˆ²**ï¼šè¨­è¨ˆæˆ–æä¾›ç°¡å–®æœ‰è¶£çš„å°éŠæˆ²
- **ç•™è¨€æ¿åŠŸèƒ½**ï¼šå„ªåŒ–åŒ¿åç•™è¨€æ¿é«”é©—ï¼Œå¢åŠ äº’å‹•åŠŸèƒ½
- **åŠŸèƒ½æ“´å±•**ï¼šé–‹ç™¼æ–°åŠŸèƒ½ï¼Œå¦‚å­¸ç¿’é€²åº¦è¿½è¹¤ã€ç­†è¨˜æ•´åˆç­‰

### æ•™å¸«è²¢ç»

å¦‚æœæ‚¨æ˜¯è¼”å¤§è³‡ç®¡çš„æ•™å¸«ï¼Œæˆ‘å€‘ç‰¹åˆ¥æ­¡è¿æ‚¨ï¼š
- æä¾›èª²ç¨‹ç›¸é—œçš„æ¨™æº–ç­”æ¡ˆå’Œå­¸ç¿’æŒ‡å—
- åˆ†äº«æ•™å­¸è³‡æºå’Œå¯¦ä¾‹
- åé¥‹ç³»çµ±å¦‚ä½•æ›´å¥½åœ°æ”¯æ´å­¸ç”Ÿå­¸ç¿’

## è‡´è¬

æ„Ÿè¬è¼”ä»å¤§å­¸è³‡è¨Šç®¡ç†å­¸ç³»çš„å¸«ç”Ÿç‚ºæœ¬å°ˆæ¡ˆæä¾›å¯¶è²´çš„æ„è¦‹å’Œè³‡æºã€‚EchoMind2 çš„é–‹ç™¼æ—¨åœ¨è¼”åŠ©æ•™å­¸å’Œå­¸ç¿’ï¼Œç‚ºè³‡ç®¡å°ˆæ¥­çŸ¥è­˜çš„å‚³æ’­å’Œç²å–æä¾›æ–°çš„å¯èƒ½æ€§ã€‚

## é–‹ç™¼è¨ˆåŠƒ

EchoMind2 æ­£åœ¨æŒçºŒé–‹ç™¼ä¸­ï¼Œä»¥ä¸‹æ˜¯æˆ‘å€‘çš„é–‹ç™¼è·¯ç·šåœ–ï¼š

### ç•¶å‰ç‰ˆæœ¬ (v1.0)
- âœ… åŸºæ–¼ Cohere å’Œ Pinecone çš„æ™ºèƒ½å•ç­”ç³»çµ±
- âœ… è¼”å¤§è³‡ç®¡å°ˆæ¥­çŸ¥è­˜åº«
- âœ… åŸºæœ¬æœç´¢å’ŒæŸ¥è©¢åŠŸèƒ½

### å³å°‡æ¨å‡º (v1.1)
- ğŸ”œ ç´“å£“å°éŠæˆ²å¹³å°
- ğŸ”œ åŒ¿åç•™è¨€æ¿åŠŸèƒ½
- ğŸ”œ ç”¨æˆ¶ç•Œé¢å„ªåŒ–

### è¦åŠƒä¸­ (v1.2)
- ğŸ“ å€‹äººå­¸ç¿’é€²åº¦è¿½è¹¤
- ğŸ“ AI å­¸ç¿’å»ºè­°ç”Ÿæˆå™¨
- ğŸ“ èª²ç¨‹ç›¸é—œè³‡æºæ¨è–¦ç³»çµ±

### é•·æœŸç›®æ¨™
- ğŸ“Œ æ•´åˆæ›´å¤šè³‡ç®¡ç³»èª²ç¨‹å…§å®¹
- ğŸ“Œ å»ºç«‹å®Œæ•´çš„çŸ¥è­˜åœ–è­œè¦–è¦ºåŒ–
- ğŸ“Œ é–‹ç™¼é©åˆè¡Œå‹•è£ç½®çš„æ‡‰ç”¨ç¨‹å¼
- ğŸ“Œ åŠ å…¥æ›´å¤šäº’å‹•å’Œç¤¾äº¤åŠŸèƒ½

## åƒèˆ‡æ¸¬è©¦

æˆ‘å€‘èª æ‘¯é‚€è«‹è¼”å¤§è³‡ç®¡ç³»çš„åŒå­¸åƒèˆ‡ EchoMind2 çš„æ¸¬è©¦ï¼Œç‰¹åˆ¥æ˜¯å³å°‡æ¨å‡ºçš„ç´“å£“å°éŠæˆ²å’ŒåŒ¿åç•™è¨€æ¿åŠŸèƒ½ã€‚å¦‚æœæ‚¨æœ‰èˆˆè¶£é«”é©—é€™äº›æ–°åŠŸèƒ½ä¸¦æä¾›å¯¶è²´æ„è¦‹ï¼Œè«‹è¯ç¹«æˆ‘å€‘æˆ–åœ¨ GitHub ä¸Šæäº¤ Issueã€‚

## æˆæ¬Š

[MIT](LICENSE)

# EchoMind å•é¡Œæ’è§£èˆ‡è§£æ±ºæ–¹æ¡ˆ

## å‘é‡æœå°‹åŠŸèƒ½å•é¡Œæ’è§£

### å•é¡Œæè¿°

æˆ‘å€‘åœ¨å¯¦ä½œå‘é‡æœå°‹åŠŸèƒ½æ™‚é‡åˆ°ä»¥ä¸‹å•é¡Œï¼š

1. å‰ç«¯å‘å¾Œç«¯ç™¼é€æŸ¥è©¢è«‹æ±‚å¾Œæ”¶åˆ°ç©ºçµæœæ•¸çµ„ `[]`ï¼Œå„˜ç®¡å¾Œç«¯æ—¥èªŒé¡¯ç¤º Pinecone ç¢ºå¯¦è¿”å›äº†çµæœ
2. å¾Œç«¯æ—¥èªŒé¡¯ç¤ºã€Œéæ¿¾å¾Œè¿”å› 3 å€‹çµæœã€ä½†æœ€çµ‚è¼¸å‡ºã€Œæ²’æœ‰åŒ¹é…çš„çµæœå¯è¿”å›ã€
3. å‰ç«¯èˆ‡å¾Œç«¯é–“çš„åƒæ•¸å‚³éå¯èƒ½ä¸ä¸€è‡´

### è§£æ±ºæ–¹æ¡ˆ

#### 1. ä¿®æ­£å¾Œç«¯éæ¿¾é‚è¼¯

å•é¡Œæ ¸å¿ƒåœ¨æ–¼å¾Œç«¯çš„é‡è¦æ€§(importance)éæ¿¾é‚è¼¯ï¼Œå°æ–¼æ²’æœ‰å®šç¾© `importance` å±¬æ€§çš„é …ç›®ï¼Œç›´æ¥è¢«éæ¿¾æ‰ï¼š

```typescript
// åŸå§‹ä»£ç¢¼ - æœ‰å•é¡Œçš„éæ¿¾é‚è¼¯
filteredResults = filteredResults.filter(item => {
  const importance = (item as any).importance;
  return importance !== undefined && importance >= minImportance;
});
```

è§£æ±ºæ–¹æ¡ˆæ˜¯ç‚ºæ²’æœ‰ `importance` å±¬æ€§çš„é …ç›®æä¾›é è¨­å€¼ï¼š

```typescript
// ä¿®æ­£å¾Œçš„ä»£ç¢¼
filteredResults = filteredResults.filter(item => {
  const importance = (item as any).importance;
  // å¦‚æœæœªå®šç¾©é‡è¦æ€§ï¼Œé»˜èªç‚º 1.0 (å…è¨±é€šé)
  const effectiveImportance = importance !== undefined ? importance : 1.0;
  return effectiveImportance >= minImportance;
});
```

#### 2. åŠ å¼·æ—¥èªŒè¨˜éŒ„

æ·»åŠ æ›´è©³ç´°çš„æ—¥èªŒè¼¸å‡ºï¼Œä»¥ä¾¿æ›´å¥½åœ°è¨ºæ–·å•é¡Œï¼š

```typescript
// æ·»åŠ éæ¿¾å‰å¾Œæ—¥èªŒ
console.log(`ğŸ” [${requestId}] ç¯©é¸é‡è¦æ€§é–¾å€¼: ${minImportance}`);
console.log(`ğŸ” [${requestId}] ç¯©é¸å‰çµæœæ•¸é‡: ${filteredResults.length}`);
  
const beforeFilterCount = filteredResults.length;
// ... éæ¿¾ä»£ç¢¼ ...
  
console.log(`ğŸ” [${requestId}] é‡è¦æ€§ç¯©é¸å¾Œçµæœæ•¸é‡: ${filteredResults.length}, ç§»é™¤äº†: ${beforeFilterCount - filteredResults.length} å€‹çµæœ`);
```

#### 3. ç¢ºä¿å‰å¾Œç«¯åƒæ•¸ä¸€è‡´æ€§

æª¢æŸ¥ä¸¦ç¢ºèªå‰ç«¯å’Œå¾Œç«¯ä½¿ç”¨ç›¸åŒçš„åƒæ•¸åç¨±ï¼š

- å‰ç«¯ç™¼é€ï¼š`{ "query": "...", "topK": 3, "minImportance": 0 }`
- å¾Œç«¯æ¥æ”¶ï¼š`const { query, topK = 3, category, minImportance } = requestData;`

#### 4. åœ¨å‰ç«¯æ·»åŠ æ›´å¤šæ—¥èªŒ

åœ¨å‰ç«¯æ·»åŠ æ›´å¤šæ—¥èªŒä¾†é¡¯ç¤º API è¿”å›çš„è©³ç´°è³‡è¨Šï¼š

```typescript
if (results.length > 0) {
  console.log('æœå°‹çµæœè©³æƒ…:', results.map((r: any) => ({
    id: r.id,
    question: r.question?.substring(0, 30) + '...',
    answer: r.answer?.substring(0, 30) + '...',
    score: r.score,
    category: r.category || 'ç„¡é¡åˆ¥'
  })));
} else {
  console.log('APIè¿”å›äº†ä¸€å€‹ç©ºçµæœæ•¸çµ„æˆ–ç„¡æ•ˆçµæœ');
  console.log('åŸå§‹å›æ‡‰è³‡æ–™é¡å‹:', typeof data, 'åŸå§‹å›æ‡‰çµæ§‹:', Object.keys(data));
}
```

### æˆåŠŸæŒ‡æ¨™

ä¿®å¾©å¾Œï¼ŒAPI è¿”å›æ­£ç¢ºçµæœï¼š
- ç¯©é¸å‰çµæœæ•¸é‡ï¼š3 å€‹
- é‡è¦æ€§ç¯©é¸å¾Œçµæœæ•¸é‡ï¼š3 å€‹ï¼Œç§»é™¤äº† 0 å€‹çµæœ
- å‰ç«¯æˆåŠŸé¡¯ç¤ºæœå°‹çµæœ

## Cohere API æ•´åˆå•é¡Œ

èˆ‡ä¸Šè¿°å•é¡Œç›¸é—œï¼Œæˆ‘å€‘é‚„ç™¼ç¾ä½¿ç”¨ Cohere API ç”ŸæˆåµŒå…¥å‘é‡æ™‚çš„ä¸€äº›æ³¨æ„äº‹é …ï¼š

### æ­£ç¢ºçš„ Cohere API ä½¿ç”¨æ–¹å¼

```typescript
// æ­£ç¢ºçš„åµŒå…¥ç”Ÿæˆ
const response = await fetch(`${apiUrl}/embeddings`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${apiKey}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    model: "embed-multilingual-v3.0",
    input: [text],
    input_type: "search_query",  // å¿…é ˆæä¾›
    embedding_types: ["float"]   // å¿…é ˆæä¾›
  })
});
```

ç¢ºä¿åœ¨å‘é‡æœå°‹å’Œæ•¸æ“šä¸Šå‚³æ™‚ä½¿ç”¨ä¸€è‡´çš„ `input_type` åƒæ•¸ï¼š
- æœå°‹æŸ¥è©¢æ™‚ä½¿ç”¨ `search_query`
- æ–‡æª”åµŒå…¥æ™‚ä½¿ç”¨ `search_document`

## çµè«–

Vector search åŠŸèƒ½çš„å•é¡Œä¸»è¦æºæ–¼å¾Œç«¯éæ¿¾é‚è¼¯ä¸­å°æœªå®šç¾© `importance` å±¬æ€§çš„è™•ç†ä¸ç•¶ã€‚é€šéæä¾›é è¨­å€¼å’Œæ›´è©³ç´°çš„æ—¥èªŒè¨˜éŒ„ï¼Œæˆ‘å€‘èƒ½å¤ è¨ºæ–·ä¸¦è§£æ±ºå•é¡Œï¼Œä½¿å‘é‡æœå°‹åŠŸèƒ½æ­£å¸¸å·¥ä½œã€‚
